<!DOCTYPE html>
<!--获取视频文件高宽-->
<html>
<head>
    <meta charset="utf-8">
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>    
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <link rel="icon" type="image/png" href="./resources/192.png" sizes="32x32">
    <title>全球首款命理交友app</title>    
    <style type="text/css">
        .video-bg{
            width: 100%;
            height: 100%;
        }
    .mask{
        position: absolute;
        width: 100%;
        
        /*不要设置初始高度，否则mask中内容刷新会抖动*/
        left: 0;
        top: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: rgba(34, 34, 34, 0.8);
    }        
    </style>
</head>

<body style="background: #000;">
                <div class="mask" id="mask">
    </div>
    <div class="mycontainer">

    <video class="video-bg" src="./resources/header264.mp4" preload="auto" muted autoplay playsinline loop x-webkit-airplay='true' x5-video-player-type='h5' type="video/mp4"></video>

    </div>
</body>

</html>
<script type="text/javascript">

    function myFunction()
    {
        this.width = this.videoWidth;
        this.height = this.videoHeight;
        console.log('wind');
        console.log(this.width);
        console.log(this.height);
        var width = document.body.clientWidth;
        var video_h = width*this.height/this.width;
        console.log(video_h);
        o = document.getElementById('mask');
        o.style.height = video_h+'px';        
        //取消监听
        video.removeEventListener("canplay", myFunction);
    }
    var video = document.querySelector('video');
    video.addEventListener("canplay", myFunction);
    console.log('hello');

</script>